#http://www.cmake.org/cmake/help/v2.8.11/cmake.html#module:ExternalProject
#http://www.kitware.com/media/html/BuildingExternalProjectsWithCMake2.8.html

include(ExternalProject)


# ------------ osgWorks ---------------------------------

ExternalProject_Add(
	osgWorks
	SOURCE_DIR "${CMAKE_CURRENT_SOURCE_DIR}/osgworks/"
	BINARY_DIR "${CMAKE_BINARY_DIR}/osgworks/"
	CMAKE_ARGS -DOPENSCENEGRAPH_LIBRARIES:PATH=${OPENSCENEGRAPH_LIBRARIES}
				-DOPENSCENEGRAPH_INCLUDE_DIR:PATH=${OPENSCENEGRAPH_INCLUDE_DIR}
				-DOSG_LIBRARY:PATH=${OSG_LIBRARY}
				-DOSG_INCLUDE_DIR:PATH=${OSG_INCLUDE_DIR}
				-DOPENTHREADS_LIBRARY:PATH=${OPENTHREADS_LIBRARY}
				-DOPENTHREADS_INCLUDE_DIR:PATH=${OPENTHREADS_INCLUDE_DIR}
				-DCMAKE_PREFIX_PATH:PATH=${OPENSCENEGRAPH_LIBRARIES}
				-DOSGGA_LIBRARY:PATH=${OSGGA_LIBRARY}
				-DOSGGA_INCLUDE_DIR:PATH=${OSGGA_INCLUDE_DIR}
				-DOSGTEXT_LIBRARY:PATH=${OSGTEXT_LIBRARY}
				-DOSGTEXT_INCLUDE_DIR:PATH=${OSGTEXT_INCLUDE_DIR}
				-DOSGVIEWER_LIBRARY:PATH=${OSGVIEWER_LIBRARY}
				-DOSGVIEWER_INCLUDE_DIR:PATH=${OSGVIEWER_INCLUDE_DIR}
				-DOSGSIM_LIBRARY:PATH=${OSGSIM_LIBRARY}
				-DOSGSIM_INCLUDE_DIR:PATH=${OSGSIM_INCLUDE_DIR}
				-DOSGUTIL_LIBRARY:PATH=${OSGUTIL_LIBRARY}
				-DOSGUTIL_INCLUDE_DIR:PATH=${OSGUTIL_INCLUDE_DIR}
				-DOSGDB_LIBRARY:PATH=${OSGDB_LIBRARY}
				-DOSGDB_INCLUDE_DIR:PATH=${OSGDB_INCLUDE_DIR}
				-DOSGSHADOW_LIBRARY:PATH=${OSGSHADOW_LIBRARY}
				-DOSGSHADOW_INCLUDE_DIR:PATH=${OSGSHADOW_INCLUDE_DIR}
				-DCMAKE_INSTALL_PREFIX:PATH=${CMAKE_INSTALL_PREFIX}
)


# ------------- Bullet ----------------------------------
#http://bulletphysics.org/mediawiki-1.5.8/index.php/Installation

ExternalProject_Add(
	bullet
	SOURCE_DIR "${CMAKE_CURRENT_SOURCE_DIR}/bullet/"
	BINARY_DIR "${CMAKE_BINARY_DIR}/bullet/"
	CMAKE_ARGS -DBUILD_DEMOS:BOOL=OFF
				-DBUILD_CPU_DEMOS:BOOL=OFF
				-DBUILD_EXTRAS:BOOL=ON
				-DBUILD_UNIT_TESTS:BOOL=OFF
				-DBUILD_SHARED_LIBS:BOOL=ON
				-DBUILD_MULTITHREADING:BOOL=ON
				-DCMAKE_INSTALL_PREFIX:PATH=${CMAKE_INSTALL_PREFIX}
				-DPKGCONFIG_INSTALL_PREFIX:PATH=${CMAKE_INSTALL_PREFIX}
				-DINCLUDE_INSTALL_DIR:PATH=${CMAKE_INSTALL_PREFIX}/include/
				-DLIB_DESTINATION:PATH=${CMAKE_INSTALL_PREFIX}/lib/
)


# ------------- osgBullet ----------------------------------
set(prefix_var ${CMAKE_BINARY_DIR}/osgworks/ ${CMAKE_CURRENT_SRC_DIR}/submodules/osgworks/include/)

ExternalProject_Add(
	osgbullet
	DEPENDS osgWorks bullet
	SOURCE_DIR "${CMAKE_CURRENT_SOURCE_DIR}/osgbullet/"
	BINARY_DIR "${CMAKE_BINARY_DIR}/osgbullet/"
	CMAKE_ARGS -DCMAKE_PREFIX_PATH:PATH=${prefix_var};
				-DCMAKE_INSTALL_PREFIX:PATH=${CMAKE_INSTALL_PREFIX}
				-DOSG_LIBRARY:PATH=${OSG_LIBRARY}
				-DOSG_INCLUDE_DIR:PATH=${OSG_INCLUDE_DIR}
				-DOPENSCENEGRAPH_INCLUDE_DIR:PATH=${OPENSCENEGRAPH_INCLUDE_DIR}
				-DOPENSCENEGRAPH_LIBRARIES:PATH=${OPENSCENEGRAPH_LIBRARIES}
				-DOSGGA_LIBRARY:PATH=${OSGGA_LIBRARY}
				-DOSGGA_INCLUDE_DIR:PATH=${OSGGA_INCLUDE_DIR}
				-DOSGTEXT_LIBRARY:PATH=${OSGTEXT_LIBRARY}
				-DOSGTEXT_INCLUDE_DIR:PATH=${OSGTEXT_INCLUDE_DIR}
				-DOSGVIEWER_LIBRARY:PATH=${OSGVIEWER_LIBRARY}
				-DOSGVIEWER_INCLUDE_DIR:PATH=${OSGVIEWER_INCLUDE_DIR}
				-DOSGUTIL_LIBRARY:PATH=${OSGUTIL_LIBRARY}
				-DOSGUTIL_INCLUDE_DIR:PATH=${OSGUTIL_INCLUDE_DIR}
				-DOSGSIM_LIBRARY:PATH=${OSGSIM_LIBRARY}
				-DOSGSIM_INCLUDE_DIR:PATH=${OSGSIM_INCLUDE_DIR}
				-DOSGDB_LIBRARY:PATH=${OSGDB_LIBRARY}
				-DOSGDB_INCLUDE_DIR:PATH=${OSGDB_INCLUDE_DIR}
				-DOSGSHADOW_LIBRARY:PATH=${OSGSHADOW_LIBRARY}
				-DOSGSHADOW_INCLUDE_DIR:PATH=${OSGSHADOW_INCLUDE_DIR}
				-DOPENTHREADS_LIBRARY:PATH=${OPENTHREADS_LIBRARY}
				-DOPENTHREADS_INCLUDE_DIR:PATH=${OPENTHREADS_INCLUDE_DIR}
				-DBULLET_INCLUDE_DIR:PATH=${CMAKE_CURRENT_SRC_DIR}/submodules/bullet/src/
				-DBULLET_ROOT:PATH=${CMAKE_INSTALL_PREFIX}/bullet/
)

